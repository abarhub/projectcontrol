<!--<p>tableau-principal works!</p>-->
<form [formGroup]="formGrouId">

  <select class="form-select" aria-label="Default select example" formControlName="groupeId">
    @for (groupeId of groupeProjet.groupeId  | keyvalue; track groupeId.key) {
      @if (groupeId.key == groupeProjet.groupeIdDefaut) {
        <option value="{{ groupeId.key }}" selected>{{ groupeId.value }}</option>
      } @else {
        <option value="{{ groupeId.key }}">{{ groupeId.value }}</option>
      }
    }
  </select>


  <button (click)="recharger($event)" class="btn">Recharger</button>

</form>

<hr>


@if (chargement) {
  <div class="spinner-border" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
} @else {

  @if (listeProjet) {

    <form [formGroup]="formGrouId2">
      <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
        <input type="radio" class="btn-check" id="btnradio1" autocomplete="off" checked [value]="AFFICHAGE_TABLEAU"
               formControlName="affichage">
        <label class="btn btn-outline-primary" for="btnradio1">Tableau</label>

        <input type="radio" class="btn-check" id="btnradio2" autocomplete="off" [value]="AFFICHAGE_RECHERCHE"
               formControlName="affichage">
        <label class="btn btn-outline-primary" for="btnradio2">Recherche</label>

      </div>

    </form>


    @if (formGrouId2.value.affichage == AFFICHAGE_TABLEAU) {
      <ag-grid-angular
        [rowData]="tableau"
        [columnDefs]="colDefs"
        domLayout="autoHeight"
        [gridOptions]="gridOptions"
      />
    } @else {
      @if (formGrouId2.value.affichage == AFFICHAGE_RECHERCHE) {

        <div>
          <div>Recherche</div>

          <form [formGroup]="formGrouId3">
          <div class="input-group">
              <input type="text" [value]="critereRecherche" formControlName="recherche"
                     class="form-control" placeholder="Critere de recherche">
              <select class="form-select max-width100" aria-label="Default select example" formControlName="typeRecherche">
                <option [value]="TYPE_RECHERCHE_TEXTE">Texte</option>
                <option [value]="TYPE_RECHERCHE_REGEXP">Regex</option>
                <option [value]="TYPE_RECHERCHE_CHEMIN">Chemin</option>
                <option [value]="TYPE_RECHERCHE_XPATH">XPath</option>
              </select>
              <button (click)="rechercher($event)" class="btn btn-outline-secondary" type="button">Rechercher</button>
          </div>
          </form>

          @if (chargementRecherche) {
            <div class="spinner-border" role="status">
              <span class="visually-hidden">Loading...</span>
            </div>
          } @else {
            @if (resultatRecherche) {
              <table class="table table-hover table-striped">
                <thead>
                <tr>
                  <th>Fichier</th>
                  <th>Ligne</th>
                </tr>
                </thead>
                @for (ligne of resultatRecherche | keyvalue; track ligne.key) {
                  <tr>
                    <td>{{ ligne.value.fichier }} : {{ ligne.value.noLigne }}</td>
                    <td [ngClass]="ligne.value.trouve ? 'trouve' : ''">{{ ligne.value.ligne }}</td>
                  </tr>
                }
              </table>
            } @else {
              <div>Aucun r√©sultat</div>
            }
          }

        </div>
      }
    }

  }

}
